---
title: Set up a custom domain on your non-production environments
sidebarTitle: (Beta) Non-production environments
weight: 3
description: Learn how to set up custom domains on your staging and development environments
banner: 
    type: beta
---

You can add a custom domain to a non-production environment (`staging` or `development` environment types)
without modifying your [routes configuration](../../define-routes/_index.md).

When you add a custom non-production domain to your project,
it replaces the production domain for the corresponding environment
(instead of the domain automatically generated by Platform.sh).
If you have multiple production domains,
you have to select which one you are replacing when adding a custom non-production domain.

You therefore need to attach each custom non-production domain you create to the production custom domain it replaces.

{{< note title="Example" >}}

You have two environments, a production environment and a staging environment.
You've added the `example.com` custom domain to your production environment.

You want to add the `staging.example.com` custom domain to your staging environment.
To do so, you need to attach the new `staging.example.com` custom domain
to its corresponding production custom domain `example.com`. 

You can then access your staging environment through `staging.example.com`
and still access your production environment through `example.com`.

{{< /note >}}

If you have multiple custom domains on your production environment,
when you create a custom non-production domain,
you still don't need to update your [routes configuration](../../define-routes/_index.md).
Platform.sh automatically figures out the routing of your non-production environment
based on the following elements:

- The production custom domains in your existing [routes configuration](../../define-routes/_index.md)
- The custom non-production domains attached to each of those production custom domains

## Get started with custom non-production domains

You need:

- A production environment with at least one custom domain already set up
- At least one non-production (staging or development) environment
- The [Platform.sh CLI](../../administration/cli/_index.md) (v4.3.0+)

In the current Beta version,
you can only add and manage non-production custom domains through the [Platform.sh CLI](../../administration/cli/_index.md).
In later versions,
you'll be able to do so in the [Platform.sh Console](../../administration/web/_index.md) too.

To add custom non-production domains yourself,
you must have a Grid or {{% names/dedicated-gen-3 %}} project.
If you use a [Managed Fastly](../cdn/managed-fastly.md) CDN,
it needs to be configured to operate with custom non-production domains.
For more information, contact [Support](https://console.platform.sh/-/users/~/tickets/open).   

{{< note theme="warning" >}}

If you have a {{% names/dedicated-gen-2 %}} project,
currently you can only add a custom domain to the dedicated environments of your project (production and staging).
To do so, contact [Support](https://console.platform.sh/-/users/~/tickets/open).

{{< /note >}}

To add custom non-production domains yourself, you must be a **project admin**.
To prevent abuse, by default you can add custom domains to up to 5 environments per project only (not including the production environment).
But you can increase this limit without charge.
To do so, [contact Support](../../overview/get-support.md).

If you delete a production custom domain,
all of the attached custom non-production domains are deleted too.
You need to rebuild the affected non-production environments for the change to be complete.

If you downgrade from an Elite or Enterprise plan to a Professional plan,
all of the custom domains set on non-production environments are automatically removed.
Downgrading your plan doesn't affect custom domains set on your production environments.

## Add a custom domain to a non-production environment

To add a custom domain to a non-production environment,
run a command similar to the following:

```bash
platform domain:add staging.example.com --environment {{< variable "STAGING_ENVIRONMENT_ID" >}} --replace {{< variable "PRODUCTION_CUSTOM_DOMAIN_TO_REPLACE" >}}
```

{{< note title="Example" >}}

You've added the `mysite.com` custom domain to your production environment.
You now want to add the `development.mysite.com` custom domain to a development environment called `Dev`.

To do so, run the following command:

```bash
platform domain:add development.mysite.com --environment Dev --replace mysite.com
```

{{< /note >}}

Note that in the above example, the `Dev` environment needs to exist
for you to add the `development.mysite.com` custom domain successfully.
If the `Dev` environment is later removed,
the `development.mysite.com` custom domain is removed too.

As for any new custom domain, it is necessary to configure your DNS provider to add a new entry for this non-production environment domain.
The DNS configuration for a non-production environment is similar to the one for production, using the same target for your project ([for more information](https://docs.platform.sh/domains/steps.html)).

Also, you can't update a custom non-production domain.
You can only delete it and create a new one as a replacement.

## List the custom domains of a non-production environment

To list all the custom domains added to a non-production environment,
run a command similar to the following:

```bash
platform domain:list --environment {{< variable "STAGING_ENVIRONMENT_ID" >}}
```

## Get a specific custom non-production domain

To retrieve a specific custom domain added to a non-production environment,
run a command similar to the following:

```bash
platform domain:get staging.example.com --environment {{< variable "STAGING_ENVIRONMENT_ID" >}}
```

## Remove a custom domain from a non-production environment

To remove a custom domain from a non-production environment,
run a command similar to the following:

```bash
platform domain:delete staging.example.com --environment {{< variable "STAGING_ENVIRONMENT_ID" >}}
```
