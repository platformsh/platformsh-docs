{{- $placeholder := (T "searchPlaceholder") | default "What are you looking for?" -}}

<div class="search-wrapper hx-relative md:hx-w-64" style="width: 100%; margin: 3rem 0rem;">
  <div class="hx-relative hx-flex hx-items-center hx-text-gray-900 contrast-more:hx-text-gray-800 dark:hx-text-gray-300 contrast-more:dark:hx-text-gray-300" 
  style="border-radius: 1rem; border: 2px solid #646F75;">
    <div style="width: 30px; margin: 1rem 1rem;">
        {{ partial "utils/icon.html" (dict "name" "search") -}}
    </div>
    <input
      placeholder="{{ $placeholder }}"
      class="search-input hx-block hx-w-full hx-appearance-none hx-rounded-lg hx-px-3 hx-py-2 hx-transition-colors hx-text-base hx-leading-tight md:hx-text-sm hx-bg-black/[.05] dark:hx-bg-gray-50/10 focus:hx-bg-white dark:focus:hx-bg-dark placeholder:hx-text-gray-500 dark:placeholder:hx-text-gray-400 contrast-more:hx-border contrast-more:hx-border-current"
      type="search"
      style="height: 4rem; border-radius: 0; border-left: 2px solid #646F75; margin-right: 1rem;"
      value=""
      spellcheck="false"
    />
    <!-- <kbd
      class="hx-absolute hx-my-1.5 hx-select-none ltr:hx-right-1.5 rtl:hx-left-1.5 hx-h-5 hx-rounded hx-bg-white hx-px-1.5 hx-font-mono hx-text-[10px] hx-font-medium hx-text-gray-500 hx-border dark:hx-border-gray-100/20 dark:hx-bg-dark/50 contrast-more:hx-border-current contrast-more:hx-text-current contrast-more:dark:hx-border-current hx-items-center hx-gap-1 hx-transition-opacity hx-pointer-events-none hx-hidden sm:hx-flex"
    >
      CTRL K
    </kbd> -->
  </div>

  <div>
    <ul
      class="search-results hextra-scrollbar hx-bg-white hx-text-gray-100 dark:hx-border-neutral-800 dark:hx-bg-neutral-900 hx-top-full hx-z-20 hx-mt-2 hx-overscroll-contain hx-rounded-xl hx-py-2.5 hx-max-h-[min(calc(50vh-11rem-env(safe-area-inset-bottom)),400px)] md:hx-max-h-[min(calc(100vh-5rem-env(safe-area-inset-bottom)),400px)] hx-inset-x-0 ltr:md:hx-left-auto rtl:md:hx-right-auto contrast-more:hx-border contrast-more:hx-border-gray-900 contrast-more:dark:hx-border-gray-50 hx-w-screen hx-min-h-[100px]"
      style="transition: max-height 0.2s ease 0s; margin-left: 0px !important; margin-top: 2rem; list-style: none !important; width: 100%; max-height: 100%;"
    ></ul>
  </div>
</div>


<!-- <script>
  function getParameterByName(name, url = window.location.href) {
    name = name.replace(/[\[\]]/g, '\\$&');
    var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
        results = regex.exec(url);
    if (!results) return null;
    if (!results[2]) return '';
    return decodeURIComponent(results[2].replace(/\+/g, ' '));
  }

  let currentQuery = getParameterByName('q');
  let searchResults = document.querySelectorAll('.search-results');
  console.log(currentQuery)

  for (const el of searchResults) {
    if (currentQuery == null) {
      el.classList.add('hx-hidden');
    } else {
      el.classList.remove('hx-hidden');
    }
  }

</script> -->
