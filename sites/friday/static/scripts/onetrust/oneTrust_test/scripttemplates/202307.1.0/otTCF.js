(()=>{var ve=Object.defineProperty;var ye=(p,e,t)=>e in p?ve(p,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):p[e]=t;var i=(p,e,t)=>(ye(p,typeof e!="symbol"?e+"":e,t),t);var x=class extends Error{constructor(e){super(e),this.name="DecodingError"}};var v=class extends Error{constructor(e){super(e),this.name="EncodingError"}};var k=class extends Error{constructor(e){super(e),this.name="GVLError"}};var V=class extends Error{constructor(e,t,s=""){super(`invalid value ${t} passed for ${e} ${s}`),this.name="TCModelError"}};var R=class{static encode(e){if(!/^[0-1]+$/.test(e))throw new v("Invalid bitField");let t=e.length%this.LCM;e+=t?"0".repeat(this.LCM-t):"";let s="";for(let r=0;r<e.length;r+=this.BASIS)s+=this.DICT[parseInt(e.substr(r,this.BASIS),2)];return s}static decode(e){if(!/^[A-Za-z0-9\-_]+$/.test(e))throw new x("Invalidly encoded Base64URL string");let t="";for(let s=0;s<e.length;s++){let r=this.REVERSE_DICT.get(e[s]).toString(2);t+="0".repeat(this.BASIS-r.length)+r}return t}};i(R,"DICT","ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),i(R,"REVERSE_DICT",new Map([["A",0],["B",1],["C",2],["D",3],["E",4],["F",5],["G",6],["H",7],["I",8],["J",9],["K",10],["L",11],["M",12],["N",13],["O",14],["P",15],["Q",16],["R",17],["S",18],["T",19],["U",20],["V",21],["W",22],["X",23],["Y",24],["Z",25],["a",26],["b",27],["c",28],["d",29],["e",30],["f",31],["g",32],["h",33],["i",34],["j",35],["k",36],["l",37],["m",38],["n",39],["o",40],["p",41],["q",42],["r",43],["s",44],["t",45],["u",46],["v",47],["w",48],["x",49],["y",50],["z",51],["0",52],["1",53],["2",54],["3",55],["4",56],["5",57],["6",58],["7",59],["8",60],["9",61],["-",62],["_",63]])),i(R,"BASIS",6),i(R,"LCM",24);var A=class{clone(){let e=new this.constructor;return Object.keys(this).forEach(s=>{let r=this.deepClone(this[s]);r!==void 0&&(e[s]=r)}),e}deepClone(e){let t=typeof e;if(t==="number"||t==="string"||t==="boolean")return e;if(e!==null&&t==="object"){if(typeof e.clone=="function")return e.clone();if(e instanceof Date)return new Date(e.getTime());if(e[Symbol.iterator]!==void 0){let s=[];for(let r of e)s.push(this.deepClone(r));return e instanceof Array?s:new e.constructor(s)}else{let s={};for(let r in e)e.hasOwnProperty(r)&&(s[r]=this.deepClone(e[r]));return s}}}};var P=class extends A{root=null;getRoot(){return this.root}isEmpty(){return!this.root}add(e){let t={value:e,left:null,right:null},s;if(this.isEmpty())this.root=t;else for(s=this.root;;)if(e<s.value)if(s.left===null){s.left=t;break}else s=s.left;else if(e>s.value)if(s.right===null){s.right=t;break}else s=s.right;else break}get(){let e=[],t=this.root;for(;t;)if(!t.left)e.push(t.value),t=t.right;else{let s=t.left;for(;s.right&&s.right!=t;)s=s.right;s.right==t?(s.right=null,e.push(t.value),t=t.right):(s.right=t,t=t.left)}return e}contains(e){let t=!1,s=this.root;for(;s;)if(s.value===e){t=!0;break}else e>s.value?s=s.right:e<s.value&&(s=s.left);return t}min(e=this.root){let t;for(;e;)e.left?e=e.left:(t=e.value,e=null);return t}max(e=this.root){let t;for(;e;)e.right?e=e.right:(t=e.value,e=null);return t}remove(e,t=this.root){let s=null,r="left";for(;t;)if(e<t.value)s=t,t=t.left,r="left";else if(e>t.value)s=t,t=t.right,r="right";else{if(!t.left&&!t.right)s?s[r]=null:this.root=null;else if(!t.left)s?s[r]=t.right:this.root=t.right;else if(!t.right)s?s[r]=t.left:this.root=t.left;else{let a=this.min(t.right);this.remove(a,t.right),t.value=a}t=null}}static build(e){if(!e||e.length===0)return null;if(e.length===1){let t=new P;return t.add(e[0]),t}else{let t=e.length>>1,s=new P;s.add(e[t]);let r=s.getRoot();if(r){if(t+1<e.length){let a=P.build(e.slice(t+1));r.right=a?a.getRoot():null}if(t-1>0){let a=P.build(e.slice(0,t-1));r.left=a?a.getRoot():null}}return s}}};var Z=class{has(e){return Z.langSet.has(e)}forEach(e){Z.langSet.forEach(e)}get size(){return Z.langSet.size}},X=Z;i(X,"langSet",new Set(["BG","CA","CS","DA","DE","EL","EN","ES","ET","FI","FR","HR","HU","IT","JA","LT","LV","MT","NL","NO","PL","PT","RO","RU","SK","SL","SV","TR","ZH"]));var o=class{};i(o,"cmpId","cmpId"),i(o,"cmpVersion","cmpVersion"),i(o,"consentLanguage","consentLanguage"),i(o,"consentScreen","consentScreen"),i(o,"created","created"),i(o,"supportOOB","supportOOB"),i(o,"isServiceSpecific","isServiceSpecific"),i(o,"lastUpdated","lastUpdated"),i(o,"numCustomPurposes","numCustomPurposes"),i(o,"policyVersion","policyVersion"),i(o,"publisherCountryCode","publisherCountryCode"),i(o,"publisherCustomConsents","publisherCustomConsents"),i(o,"publisherCustomLegitimateInterests","publisherCustomLegitimateInterests"),i(o,"publisherLegitimateInterests","publisherLegitimateInterests"),i(o,"publisherConsents","publisherConsents"),i(o,"publisherRestrictions","publisherRestrictions"),i(o,"purposeConsents","purposeConsents"),i(o,"purposeLegitimateInterests","purposeLegitimateInterests"),i(o,"purposeOneTreatment","purposeOneTreatment"),i(o,"specialFeatureOptins","specialFeatureOptins"),i(o,"useNonStandardStacks","useNonStandardStacks"),i(o,"vendorConsents","vendorConsents"),i(o,"vendorLegitimateInterests","vendorLegitimateInterests"),i(o,"vendorListVersion","vendorListVersion"),i(o,"vendorsAllowed","vendorsAllowed"),i(o,"vendorsDisclosed","vendorsDisclosed"),i(o,"version","version");var L;(function(p){p[p.NOT_ALLOWED=0]="NOT_ALLOWED",p[p.REQUIRE_CONSENT=1]="REQUIRE_CONSENT",p[p.REQUIRE_LI=2]="REQUIRE_LI"})(L||(L={}));var oe=class extends A{purposeId_;restrictionType;constructor(e,t){super(),e!==void 0&&(this.purposeId=e),t!==void 0&&(this.restrictionType=t)}static unHash(e){let t=e.split(this.hashSeparator),s=new oe;if(t.length!==2)throw new V("hash",e);return s.purposeId=parseInt(t[0],10),s.restrictionType=parseInt(t[1],10),s}get hash(){if(!this.isValid())throw new Error("cannot hash invalid PurposeRestriction");return`${this.purposeId}${oe.hashSeparator}${this.restrictionType}`}get purposeId(){return this.purposeId_}set purposeId(e){this.purposeId_=e}isValid(){return Number.isInteger(this.purposeId)&&this.purposeId>0&&(this.restrictionType===L.NOT_ALLOWED||this.restrictionType===L.REQUIRE_CONSENT||this.restrictionType===L.REQUIRE_LI)}isSameAs(e){return this.purposeId===e.purposeId&&this.restrictionType===e.restrictionType}},_=oe;i(_,"hashSeparator","-");var j=class extends A{bitLength=0;map=new Map;gvl_;has(e){return this.map.has(e)}isOkToHave(e,t,s){let r=!0;if(this.gvl?.vendors){let a=this.gvl.vendors[s];if(a)if(e===L.NOT_ALLOWED)r=a.legIntPurposes.includes(t)||a.purposes.includes(t);else if(a.flexiblePurposes.length)switch(e){case L.REQUIRE_CONSENT:r=a.flexiblePurposes.includes(t)&&a.legIntPurposes.includes(t);break;case L.REQUIRE_LI:r=a.flexiblePurposes.includes(t)&&a.purposes.includes(t);break}else r=!1;else r=!1}return r}add(e,t){if(this.isOkToHave(t.restrictionType,t.purposeId,e)){let s=t.hash;this.has(s)||(this.map.set(s,new P),this.bitLength=0),this.map.get(s).add(e)}}restrictPurposeToLegalBasis(e){let t=this.gvl.vendorIds,s=e.hash,r=function(){let u;for(u of t);return u}(),a=[...Array(r).keys()].map(u=>u+1);for(let u=1;u<=r;u++)this.has(s)||(this.map.set(s,P.build(a)),this.bitLength=0),this.map.get(s).add(u)}getVendors(e){let t=[];if(e){let s=e.hash;this.has(s)&&(t=this.map.get(s).get())}else{let s=new Set;this.map.forEach(r=>{r.get().forEach(a=>{s.add(a)})}),t=Array.from(s)}return t}getRestrictionType(e,t){let s;return this.getRestrictions(e).forEach(r=>{r.purposeId===t&&(s===void 0||s>r.restrictionType)&&(s=r.restrictionType)}),s}vendorHasRestriction(e,t){let s=!1,r=this.getRestrictions(e);for(let a=0;a<r.length&&!s;a++)s=t.isSameAs(r[a]);return s}getMaxVendorId(){let e=0;return this.map.forEach(t=>{e=Math.max(t.max(),e)}),e}getRestrictions(e){let t=[];return this.map.forEach((s,r)=>{e?s.contains(e)&&t.push(_.unHash(r)):t.push(_.unHash(r))}),t}getPurposes(){let e=new Set;return this.map.forEach((t,s)=>{e.add(_.unHash(s).purposeId)}),Array.from(e)}remove(e,t){let s=t.hash,r=this.map.get(s);r&&(r.remove(e),r.isEmpty()&&(this.map.delete(s),this.bitLength=0))}set gvl(e){this.gvl_||(this.gvl_=e,this.map.forEach((t,s)=>{let r=_.unHash(s);t.get().forEach(u=>{this.isOkToHave(r.restrictionType,r.purposeId,u)||t.remove(u)})}))}get gvl(){return this.gvl_}isEmpty(){return this.map.size===0}get numRestrictions(){return this.map.size}};var we;(function(p){p.COOKIE="cookie",p.WEB="web",p.APP="app"})(we||(we={}));var E;(function(p){p.CORE="core",p.VENDORS_DISCLOSED="vendorsDisclosed",p.VENDORS_ALLOWED="vendorsAllowed",p.PUBLISHER_TC="publisherTC"})(E||(E={}));var Q=class{};i(Q,"ID_TO_KEY",[E.CORE,E.VENDORS_DISCLOSED,E.VENDORS_ALLOWED,E.PUBLISHER_TC]),i(Q,"KEY_TO_ID",{[E.CORE]:0,[E.VENDORS_DISCLOSED]:1,[E.VENDORS_ALLOWED]:2,[E.PUBLISHER_TC]:3});var w=class extends A{bitLength=0;maxId_=0;set_=new Set;*[Symbol.iterator](){for(let e=1;e<=this.maxId;e++)yield[e,this.has(e)]}values(){return this.set_.values()}get maxId(){return this.maxId_}has(e){return this.set_.has(e)}unset(e){Array.isArray(e)?e.forEach(t=>this.unset(t)):typeof e=="object"?this.unset(Object.keys(e).map(t=>Number(t))):(this.set_.delete(Number(e)),this.bitLength=0,e===this.maxId&&(this.maxId_=0,this.set_.forEach(t=>{this.maxId_=Math.max(this.maxId,t)})))}isIntMap(e){let t=typeof e=="object";return t=t&&Object.keys(e).every(s=>{let r=Number.isInteger(parseInt(s,10));return r=r&&this.isValidNumber(e[s].id),r=r&&e[s].name!==void 0,r}),t}isValidNumber(e){return parseInt(e,10)>0}isSet(e){let t=!1;return e instanceof Set&&(t=Array.from(e).every(this.isValidNumber)),t}set(e){if(Array.isArray(e))e.forEach(t=>this.set(t));else if(this.isSet(e))this.set(Array.from(e));else if(this.isIntMap(e))this.set(Object.keys(e).map(t=>Number(t)));else if(this.isValidNumber(e))this.set_.add(e),this.maxId_=Math.max(this.maxId,e),this.bitLength=0;else throw new V("set()",e,"must be positive integer array, positive integer, Set<number>, or IntMap")}empty(){this.set_=new Set}forEach(e){for(let t=1;t<=this.maxId;t++)e(this.has(t),t)}get size(){return this.set_.size}setAll(e){this.set(e)}};var Ve,Ae,Te,Le,_e,Oe,Re,Ne,Pe,De,Ue,Fe,Ge,He,Me,ke,Qe,$e,n=class{};Ve=o.cmpId,Ae=o.cmpVersion,Te=o.consentLanguage,Le=o.consentScreen,_e=o.created,Oe=o.isServiceSpecific,Re=o.lastUpdated,Ne=o.policyVersion,Pe=o.publisherCountryCode,De=o.publisherLegitimateInterests,Ue=o.publisherConsents,Fe=o.purposeConsents,Ge=o.purposeLegitimateInterests,He=o.purposeOneTreatment,Me=o.specialFeatureOptins,ke=o.useNonStandardStacks,Qe=o.vendorListVersion,$e=o.version,i(n,Ve,12),i(n,Ae,12),i(n,Te,12),i(n,Le,6),i(n,_e,36),i(n,Oe,1),i(n,Re,36),i(n,Ne,6),i(n,Pe,12),i(n,De,24),i(n,Ue,24),i(n,Fe,24),i(n,Ge,24),i(n,He,1),i(n,Me,12),i(n,ke,1),i(n,Qe,12),i(n,$e,6),i(n,"anyBoolean",1),i(n,"encodingType",1),i(n,"maxId",16),i(n,"numCustomPurposes",6),i(n,"numEntries",12),i(n,"numRestrictions",12),i(n,"purposeId",6),i(n,"restrictionType",2),i(n,"segmentType",3),i(n,"singleOrRange",1),i(n,"vendorId",16);var y=class{static encode(e){return String(Number(e))}static decode(e){return e==="1"}};var d=class{static encode(e,t){let s;if(typeof e=="string"&&(e=parseInt(e,10)),s=e.toString(2),s.length>t||e<0)throw new v(`${e} too large to encode into ${t}`);return s.length<t&&(s="0".repeat(t-s.length)+s),s}static decode(e,t){if(t!==e.length)throw new x("invalid bit length");return parseInt(e,2)}};var ee=class{static encode(e,t){return d.encode(Math.round(e.getTime()/100),t)}static decode(e,t){if(t!==e.length)throw new x("invalid bit length");let s=new Date;return s.setTime(d.decode(e,t)*100),s}};var O=class{static encode(e,t){let s="";for(let r=1;r<=t;r++)s+=y.encode(e.has(r));return s}static decode(e,t){if(e.length!==t)throw new x("bitfield encoding length mismatch");let s=new w;for(let r=1;r<=t;r++)y.decode(e[r-1])&&s.set(r);return s.bitLength=e.length,s}};var te=class{static encode(e,t){e=e.toUpperCase();let s=65,r=e.charCodeAt(0)-s,a=e.charCodeAt(1)-s;if(r<0||r>25||a<0||a>25)throw new v(`invalid language code: ${e}`);if(t%2===1)throw new v(`numBits must be even, ${t} is not valid`);t=t/2;let u=d.encode(r,t),l=d.encode(a,t);return u+l}static decode(e,t){let s;if(t===e.length&&!(e.length%2)){let a=e.length/2,u=d.decode(e.slice(0,a),a)+65,l=d.decode(e.slice(a),a)+65;s=String.fromCharCode(u)+String.fromCharCode(l)}else throw new x("invalid bit length for language");return s}};var ie=class{static encode(e){let t=d.encode(e.numRestrictions,n.numRestrictions);return e.isEmpty()||e.getRestrictions().forEach(s=>{t+=d.encode(s.purposeId,n.purposeId),t+=d.encode(s.restrictionType,n.restrictionType);let r=e.getVendors(s),a=r.length,u=0,l=0,h="";for(let m=0;m<a;m++){let f=r[m];l===0&&(u++,l=f);let I=r[a-1],C=e.gvl.vendorIds,W=N=>{for(;++N<=I&&!C.has(N););return N};if(m===a-1||r[m+1]>W(f)){let N=f!==l;h+=y.encode(N),h+=d.encode(l,n.vendorId),N&&(h+=d.encode(f,n.vendorId)),l=0}}t+=d.encode(u,n.numEntries),t+=h}),t}static decode(e){let t=0,s=new j,r=d.decode(e.substr(t,n.numRestrictions),n.numRestrictions);t+=n.numRestrictions;for(let a=0;a<r;a++){let u=d.decode(e.substr(t,n.purposeId),n.purposeId);t+=n.purposeId;let l=d.decode(e.substr(t,n.restrictionType),n.restrictionType);t+=n.restrictionType;let h=new _(u,l),m=d.decode(e.substr(t,n.numEntries),n.numEntries);t+=n.numEntries;for(let f=0;f<m;f++){let I=y.decode(e.substr(t,n.anyBoolean));t+=n.anyBoolean;let C=d.decode(e.substr(t,n.vendorId),n.vendorId);if(t+=n.vendorId,I){let W=d.decode(e.substr(t,n.vendorId),n.vendorId);if(t+=n.vendorId,W<C)throw new x(`Invalid RangeEntry: endVendorId ${W} is less than ${C}`);for(let N=C;N<=W;N++)s.add(N,h)}else s.add(C,h)}}return s.bitLength=t,s}};var z;(function(p){p[p.FIELD=0]="FIELD",p[p.RANGE=1]="RANGE"})(z||(z={}));var G=class{static encode(e){let t=[],s=[],r=d.encode(e.maxId,n.maxId),a="",u,l=n.maxId+n.encodingType,h=l+e.maxId,m=n.vendorId*2+n.singleOrRange+n.numEntries,f=l+n.numEntries;return e.forEach((I,C)=>{a+=y.encode(I),u=e.maxId>m&&f<h,u&&I&&(e.has(C+1)?s.length===0&&(s.push(C),f+=n.singleOrRange,f+=n.vendorId):(s.push(C),f+=n.vendorId,t.push(s),s=[]))}),u?(r+=String(z.RANGE),r+=this.buildRangeEncoding(t)):(r+=String(z.FIELD),r+=a),r}static decode(e,t){let s,r=0,a=d.decode(e.substr(r,n.maxId),n.maxId);r+=n.maxId;let u=d.decode(e.charAt(r),n.encodingType);if(r+=n.encodingType,u===z.RANGE){if(s=new w,t===1){if(e.substr(r,1)==="1")throw new x("Unable to decode default consent=1");r++}let l=d.decode(e.substr(r,n.numEntries),n.numEntries);r+=n.numEntries;for(let h=0;h<l;h++){let m=y.decode(e.charAt(r));r+=n.singleOrRange;let f=d.decode(e.substr(r,n.vendorId),n.vendorId);if(r+=n.vendorId,m){let I=d.decode(e.substr(r,n.vendorId),n.vendorId);r+=n.vendorId;for(let C=f;C<=I;C++)s.set(C)}else s.set(f)}}else{let l=e.substr(r,a);r+=a,s=O.decode(l,a)}return s.bitLength=r,s}static buildRangeEncoding(e){let t=e.length,s=d.encode(t,n.numEntries);return e.forEach(r=>{let a=r.length===1;s+=y.encode(!a),s+=d.encode(r[0],n.vendorId),a||(s+=d.encode(r[1],n.vendorId))}),s}};function be(){return{[o.version]:d,[o.created]:ee,[o.lastUpdated]:ee,[o.cmpId]:d,[o.cmpVersion]:d,[o.consentScreen]:d,[o.consentLanguage]:te,[o.vendorListVersion]:d,[o.policyVersion]:d,[o.isServiceSpecific]:y,[o.useNonStandardStacks]:y,[o.specialFeatureOptins]:O,[o.purposeConsents]:O,[o.purposeLegitimateInterests]:O,[o.purposeOneTreatment]:y,[o.publisherCountryCode]:te,[o.vendorConsents]:G,[o.vendorLegitimateInterests]:G,[o.publisherRestrictions]:ie,segmentType:d,[o.vendorsDisclosed]:G,[o.vendorsAllowed]:G,[o.publisherConsents]:O,[o.publisherLegitimateInterests]:O,[o.numCustomPurposes]:d,[o.publisherCustomConsents]:O,[o.publisherCustomLegitimateInterests]:O}}var ne=class{1={[E.CORE]:[o.version,o.created,o.lastUpdated,o.cmpId,o.cmpVersion,o.consentScreen,o.consentLanguage,o.vendorListVersion,o.purposeConsents,o.vendorConsents]};2={[E.CORE]:[o.version,o.created,o.lastUpdated,o.cmpId,o.cmpVersion,o.consentScreen,o.consentLanguage,o.vendorListVersion,o.policyVersion,o.isServiceSpecific,o.useNonStandardStacks,o.specialFeatureOptins,o.purposeConsents,o.purposeLegitimateInterests,o.purposeOneTreatment,o.publisherCountryCode,o.vendorConsents,o.vendorLegitimateInterests,o.publisherRestrictions],[E.PUBLISHER_TC]:[o.publisherConsents,o.publisherLegitimateInterests,o.numCustomPurposes,o.publisherCustomConsents,o.publisherCustomLegitimateInterests],[E.VENDORS_ALLOWED]:[o.vendorsAllowed],[E.VENDORS_DISCLOSED]:[o.vendorsDisclosed]}};var ae=class{1=[E.CORE];2=[E.CORE];constructor(e,t){if(e.version===2)if(e.isServiceSpecific)this[2].push(E.PUBLISHER_TC);else{let s=!!(t&&t.isForVendors);(!s||e[o.supportOOB]===!0)&&this[2].push(E.VENDORS_DISCLOSED),s&&(e[o.supportOOB]&&e[o.vendorsAllowed].size>0&&this[2].push(E.VENDORS_ALLOWED),this[2].push(E.PUBLISHER_TC))}}};var q=class{static encode(e,t){let s;try{s=this.fieldSequence[String(e.version)][t]}catch{throw new v(`Unable to encode version: ${e.version}, segment: ${t}`)}let r="";t!==E.CORE&&(r=d.encode(Q.KEY_TO_ID[t],n.segmentType));let a=be();return s.forEach(u=>{let l=e[u],h=a[u],m=n[u];m===void 0&&this.isPublisherCustom(u)&&(m=Number(e[o.numCustomPurposes]));try{r+=h.encode(l,m)}catch(f){throw new v(`Error encoding ${t}->${u}: ${f.message}`)}}),R.encode(r)}static decode(e,t,s){let r=R.decode(e),a=0;s===E.CORE&&(t.version=d.decode(r.substr(a,n[o.version]),n[o.version])),s!==E.CORE&&(a+=n.segmentType);let u=this.fieldSequence[String(t.version)][s],l=be();return u.forEach(h=>{let m=l[h],f=n[h];if(f===void 0&&this.isPublisherCustom(h)&&(f=Number(t[o.numCustomPurposes])),f!==0){let I=r.substr(a,f);if(m===G?t[h]=m.decode(I,t.version):t[h]=m.decode(I,f),Number.isInteger(f))a+=f;else if(Number.isInteger(t[h].bitLength))a+=t[h].bitLength;else throw new x(h)}}),t}static isPublisherCustom(e){return e.indexOf("publisherCustom")===0}};i(q,"fieldSequence",new ne);var se=class{static process(e,t){let s=e.gvl;if(!s)throw new v("Unable to encode TCModel without a GVL");if(!s.isReady)throw new v("Unable to encode TCModel tcModel.gvl.readyPromise is not resolved");e=e.clone(),e.consentLanguage=s.language.toUpperCase(),t?.version>0&&t?.version<=this.processor.length?e.version=t.version:e.version=this.processor.length;let r=e.version-1;if(!this.processor[r])throw new v(`Invalid version: ${e.version}`);return this.processor[r](e,s)}};i(se,"processor",[e=>e,(e,t)=>{e.publisherRestrictions.gvl=t,e.purposeLegitimateInterests.unset(1);let s=new Map;return s.set("legIntPurposes",e.vendorLegitimateInterests),s.set("purposes",e.vendorConsents),s.forEach((r,a)=>{r.forEach((u,l)=>{if(u){let h=t.vendors[l];if(!h||h.deletedDate)r.unset(l);else if(h[a].length===0&&!(a==="legIntPurposes"&&h.purposes.length===0&&h.legIntPurposes.length===0&&h.specialPurposes.length>0))if(e.isServiceSpecific)if(h.flexiblePurposes.length===0)r.unset(l);else{let m=e.publisherRestrictions.getRestrictions(l),f=!1;for(let I=0,C=m.length;I<C&&!f;I++)f=m[I].restrictionType===L.REQUIRE_CONSENT&&a==="purposes"||m[I].restrictionType===L.REQUIRE_LI&&a==="legIntPurposes";f||r.unset(l)}else r.unset(l)}})}),e.vendorsDisclosed.set(t.vendors),e}]);var pe=class{static absCall(e,t,s,r){return new Promise((a,u)=>{let l=new XMLHttpRequest,h=()=>{if(l.readyState==XMLHttpRequest.DONE)if(l.status>=200&&l.status<300){let C=l.response;if(typeof C=="string")try{C=JSON.parse(C)}catch{}a(C)}else u(new Error(`HTTP Status: ${l.status} response type: ${l.responseType}`))},m=()=>{u(new Error("error"))},f=()=>{u(new Error("aborted"))},I=()=>{u(new Error("Timeout "+r+"ms "+e))};l.withCredentials=s,l.addEventListener("load",h),l.addEventListener("error",m),l.addEventListener("abort",f),t===null?l.open("GET",e,!0):l.open("POST",e,!0),l.responseType="json",l.timeout=r,l.ontimeout=I,l.send(t)})}static post(e,t,s=!1,r=0){return this.absCall(e,JSON.stringify(t),s,r)}static fetch(e,t=!1,s=0){return this.absCall(e,null,t,s)}};var g=class extends A{static set baseUrl(e){if(/^https?:\/\/vendorlist\.consensu\.org\//.test(e))throw new k("Invalid baseUrl!  You may not pull directly from vendorlist.consensu.org and must provide your own cache");e.length>0&&e[e.length-1]!=="/"&&(e+="/"),this.baseUrl_=e}static get baseUrl(){return this.baseUrl_}readyPromise;gvlSpecificationVersion;vendorListVersion;tcfPolicyVersion;lastUpdated;purposes;specialPurposes;features;specialFeatures;isReady_=!1;vendors_;vendorIds;fullVendorList;byPurposeVendorMap;bySpecialPurposeVendorMap;byFeatureVendorMap;bySpecialFeatureVendorMap;stacks;lang_;isLatest=!1;constructor(e){super();let t=g.baseUrl;if(this.lang_=g.DEFAULT_LANGUAGE,this.isVendorList(e))this.populate(e),this.readyPromise=Promise.resolve();else{if(!t)throw new k("must specify GVL.baseUrl before loading GVL json");if(e>0){let s=e;g.CACHE.has(s)?(this.populate(g.CACHE.get(s)),this.readyPromise=Promise.resolve()):(t+=g.versionedFilename.replace("[VERSION]",String(s)),this.readyPromise=this.fetchJson(t))}else g.CACHE.has(g.LATEST_CACHE_KEY)?(this.populate(g.CACHE.get(g.LATEST_CACHE_KEY)),this.readyPromise=Promise.resolve()):(this.isLatest=!0,this.readyPromise=this.fetchJson(t+g.latestFilename))}}static emptyLanguageCache(e){let t=!1;return e===void 0&&g.LANGUAGE_CACHE.size>0?(g.LANGUAGE_CACHE=new Map,t=!0):typeof e=="string"&&this.consentLanguages.has(e.toUpperCase())&&(g.LANGUAGE_CACHE.delete(e.toUpperCase()),t=!0),t}static emptyCache(e){let t=!1;return Number.isInteger(e)&&e>=0?(g.CACHE.delete(e),t=!0):e===void 0&&(g.CACHE=new Map,t=!0),t}cacheLanguage(){g.LANGUAGE_CACHE.has(this.lang_)||g.LANGUAGE_CACHE.set(this.lang_,{purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks})}async fetchJson(e){try{this.populate(await pe.fetch(e))}catch(t){throw new k(t.message)}}getJson(){return JSON.parse(JSON.stringify({gvlSpecificationVersion:this.gvlSpecificationVersion,vendorListVersion:this.vendorListVersion,tcfPolicyVersion:this.tcfPolicyVersion,lastUpdated:this.lastUpdated,purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks,vendors:this.fullVendorList}))}async changeLanguage(e){let t=e.toUpperCase();if(g.consentLanguages.has(t)){if(t!==this.lang_)if(this.lang_=t,g.LANGUAGE_CACHE.has(t)){let s=g.LANGUAGE_CACHE.get(t);for(let r in s)s.hasOwnProperty(r)&&(this[r]=s[r])}else{let s=g.baseUrl+g.languageFilename.replace("[LANG]",e);try{await this.fetchJson(s),this.cacheLanguage()}catch(r){throw new k("unable to load language: "+r.message)}}}else throw new k(`unsupported language ${e}`)}get language(){return this.lang_}isVendorList(e){return e!==void 0&&e.vendors!==void 0}populate(e){this.purposes=e.purposes,this.specialPurposes=e.specialPurposes,this.features=e.features,this.specialFeatures=e.specialFeatures,this.stacks=e.stacks,this.isVendorList(e)&&(this.gvlSpecificationVersion=e.gvlSpecificationVersion,this.tcfPolicyVersion=e.tcfPolicyVersion,this.vendorListVersion=e.vendorListVersion,this.lastUpdated=e.lastUpdated,typeof this.lastUpdated=="string"&&(this.lastUpdated=new Date(this.lastUpdated)),this.vendors_=e.vendors,this.fullVendorList=e.vendors,this.mapVendors(),this.isReady_=!0,this.isLatest&&g.CACHE.set(g.LATEST_CACHE_KEY,this.getJson()),g.CACHE.has(this.vendorListVersion)||g.CACHE.set(this.vendorListVersion,this.getJson())),this.cacheLanguage()}mapVendors(e){this.byPurposeVendorMap={},this.bySpecialPurposeVendorMap={},this.byFeatureVendorMap={},this.bySpecialFeatureVendorMap={},Object.keys(this.purposes).forEach(t=>{this.byPurposeVendorMap[t]={legInt:new Set,consent:new Set,flexible:new Set}}),Object.keys(this.specialPurposes).forEach(t=>{this.bySpecialPurposeVendorMap[t]=new Set}),Object.keys(this.features).forEach(t=>{this.byFeatureVendorMap[t]=new Set}),Object.keys(this.specialFeatures).forEach(t=>{this.bySpecialFeatureVendorMap[t]=new Set}),Array.isArray(e)||(e=Object.keys(this.fullVendorList).map(t=>+t)),this.vendorIds=new Set(e),this.vendors_=e.reduce((t,s)=>{let r=this.vendors_[String(s)];return r&&r.deletedDate===void 0&&(r.purposes.forEach(a=>{this.byPurposeVendorMap[String(a)].consent.add(s)}),r.specialPurposes.forEach(a=>{this.bySpecialPurposeVendorMap[String(a)].add(s)}),r.legIntPurposes.forEach(a=>{this.byPurposeVendorMap[String(a)].legInt.add(s)}),r.flexiblePurposes&&r.flexiblePurposes.forEach(a=>{this.byPurposeVendorMap[String(a)].flexible.add(s)}),r.features.forEach(a=>{this.byFeatureVendorMap[String(a)].add(s)}),r.specialFeatures.forEach(a=>{this.bySpecialFeatureVendorMap[String(a)].add(s)}),t[s]=r),t},{})}getFilteredVendors(e,t,s,r){let a=e.charAt(0).toUpperCase()+e.slice(1),u,l={};return e==="purpose"&&s?u=this["by"+a+"VendorMap"][String(t)][s]:u=this["by"+(r?"Special":"")+a+"VendorMap"][String(t)],u.forEach(h=>{l[String(h)]=this.vendors[String(h)]}),l}getVendorsWithConsentPurpose(e){return this.getFilteredVendors("purpose",e,"consent")}getVendorsWithLegIntPurpose(e){return this.getFilteredVendors("purpose",e,"legInt")}getVendorsWithFlexiblePurpose(e){return this.getFilteredVendors("purpose",e,"flexible")}getVendorsWithSpecialPurpose(e){return this.getFilteredVendors("purpose",e,void 0,!0)}getVendorsWithFeature(e){return this.getFilteredVendors("feature",e)}getVendorsWithSpecialFeature(e){return this.getFilteredVendors("feature",e,void 0,!0)}get vendors(){return this.vendors_}narrowVendorsTo(e){this.mapVendors(e)}get isReady(){return this.isReady_}clone(){let e=new g(this.getJson());return this.lang_!==g.DEFAULT_LANGUAGE&&e.changeLanguage(this.lang_),e}static isInstanceOf(e){return typeof e=="object"&&typeof e.narrowVendorsTo=="function"}},S=g;i(S,"LANGUAGE_CACHE",new Map),i(S,"CACHE",new Map),i(S,"LATEST_CACHE_KEY",0),i(S,"DEFAULT_LANGUAGE","EN"),i(S,"consentLanguages",new X),i(S,"baseUrl_"),i(S,"latestFilename","vendor-list.json"),i(S,"versionedFilename","archives/vendor-list-v[VERSION].json"),i(S,"languageFilename","purposes-[LANG].json");var H=class extends A{isServiceSpecific_=!1;supportOOB_=!0;useNonStandardStacks_=!1;purposeOneTreatment_=!1;publisherCountryCode_="AA";version_=2;consentScreen_=0;policyVersion_=2;consentLanguage_="EN";cmpId_=0;cmpVersion_=0;vendorListVersion_=0;numCustomPurposes_=0;gvl_;created;lastUpdated;specialFeatureOptins=new w;purposeConsents=new w;purposeLegitimateInterests=new w;publisherConsents=new w;publisherLegitimateInterests=new w;publisherCustomConsents=new w;publisherCustomLegitimateInterests=new w;customPurposes;vendorConsents=new w;vendorLegitimateInterests=new w;vendorsDisclosed=new w;vendorsAllowed=new w;publisherRestrictions=new j;constructor(e){super(),e&&(this.gvl=e),this.updated()}set gvl(e){S.isInstanceOf(e)||(e=new S(e)),this.gvl_=e,this.publisherRestrictions.gvl=e}get gvl(){return this.gvl_}set cmpId(e){if(e=Number(e),Number.isInteger(e)&&e>1)this.cmpId_=e;else throw new V("cmpId",e)}get cmpId(){return this.cmpId_}set cmpVersion(e){if(e=Number(e),Number.isInteger(e)&&e>-1)this.cmpVersion_=e;else throw new V("cmpVersion",e)}get cmpVersion(){return this.cmpVersion_}set consentScreen(e){if(e=Number(e),Number.isInteger(e)&&e>-1)this.consentScreen_=e;else throw new V("consentScreen",e)}get consentScreen(){return this.consentScreen_}set consentLanguage(e){this.consentLanguage_=e}get consentLanguage(){return this.consentLanguage_}set publisherCountryCode(e){if(/^([A-z]){2}$/.test(e))this.publisherCountryCode_=e.toUpperCase();else throw new V("publisherCountryCode",e)}get publisherCountryCode(){return this.publisherCountryCode_}set vendorListVersion(e){if(e=Number(e)>>0,e<0)throw new V("vendorListVersion",e);this.vendorListVersion_=e}get vendorListVersion(){return this.gvl?this.gvl.vendorListVersion:this.vendorListVersion_}set policyVersion(e){if(this.policyVersion_=parseInt(e,10),this.policyVersion_<0)throw new V("policyVersion",e)}get policyVersion(){return this.gvl?this.gvl.tcfPolicyVersion:this.policyVersion_}set version(e){this.version_=parseInt(e,10)}get version(){return this.version_}set isServiceSpecific(e){this.isServiceSpecific_=e}get isServiceSpecific(){return this.isServiceSpecific_}set useNonStandardStacks(e){this.useNonStandardStacks_=e}get useNonStandardStacks(){return this.useNonStandardStacks_}set supportOOB(e){this.supportOOB_=e}get supportOOB(){return this.supportOOB_}set purposeOneTreatment(e){this.purposeOneTreatment_=e}get purposeOneTreatment(){return this.purposeOneTreatment_}setAllVendorConsents(){this.vendorConsents.set(this.gvl.vendors)}unsetAllVendorConsents(){this.vendorConsents.empty()}setAllVendorsDisclosed(){this.vendorsDisclosed.set(this.gvl.vendors)}unsetAllVendorsDisclosed(){this.vendorsDisclosed.empty()}setAllVendorsAllowed(){this.vendorsAllowed.set(this.gvl.vendors)}unsetAllVendorsAllowed(){this.vendorsAllowed.empty()}setAllVendorLegitimateInterests(){this.vendorLegitimateInterests.set(this.gvl.vendors)}unsetAllVendorLegitimateInterests(){this.vendorLegitimateInterests.empty()}setAllPurposeConsents(){this.purposeConsents.set(this.gvl.purposes)}unsetAllPurposeConsents(){this.purposeConsents.empty()}setAllPurposeLegitimateInterests(){this.purposeLegitimateInterests.set(this.gvl.purposes)}unsetAllPurposeLegitimateInterests(){this.purposeLegitimateInterests.empty()}setAllSpecialFeatureOptins(){this.specialFeatureOptins.set(this.gvl.specialFeatures)}unsetAllSpecialFeatureOptins(){this.specialFeatureOptins.empty()}setAll(){this.setAllVendorConsents(),this.setAllPurposeLegitimateInterests(),this.setAllSpecialFeatureOptins(),this.setAllPurposeConsents(),this.setAllVendorLegitimateInterests()}unsetAll(){this.unsetAllVendorConsents(),this.unsetAllPurposeLegitimateInterests(),this.unsetAllSpecialFeatureOptins(),this.unsetAllPurposeConsents(),this.unsetAllVendorLegitimateInterests()}get numCustomPurposes(){let e=this.numCustomPurposes_;if(typeof this.customPurposes=="object"){let t=Object.keys(this.customPurposes).sort((s,r)=>Number(s)-Number(r));e=parseInt(t.pop(),10)}return e}set numCustomPurposes(e){if(this.numCustomPurposes_=parseInt(e,10),this.numCustomPurposes_<0)throw new V("numCustomPurposes",e)}updated(){let e=new Date,t=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()));this.created=t,this.lastUpdated=t}};i(H,"consentLanguages",S.consentLanguages);var Y=class{static encode(e,t){let s="",r;return e=se.process(e,t),Array.isArray(t?.segments)?r=t.segments:r=new ae(e,t)[""+e.version],r.forEach((a,u)=>{let l="";u<r.length-1&&(l="."),s+=q.encode(e,a)+l}),s}static decode(e,t){let s=e.split("."),r=s.length;t||(t=new H);for(let a=0;a<r;a++){let u=s[a],h=R.decode(u.charAt(0)).substr(0,n.segmentType),m=Q.ID_TO_KEY[d.decode(h,n.segmentType).toString()];q.decode(u,t,m)}return t}};var b;(function(p){p.PING="ping",p.GET_TC_DATA="getTCData",p.GET_IN_APP_TC_DATA="getInAppTCData",p.GET_VENDOR_LIST="getVendorList",p.ADD_EVENT_LISTENER="addEventListener",p.REMOVE_EVENT_LISTENER="removeEventListener"})(b||(b={}));var D;(function(p){p.STUB="stub",p.LOADING="loading",p.LOADED="loaded",p.ERROR="error"})(D||(D={}));var M;(function(p){p.VISIBLE="visible",p.HIDDEN="hidden",p.DISABLED="disabled"})(M||(M={}));var B;(function(p){p.TC_LOADED="tcloaded",p.CMP_UI_SHOWN="cmpuishown",p.USER_ACTION_COMPLETE="useractioncomplete"})(B||(B={}));var U=class{listenerId;callback;next;param;success=!0;constructor(e,t,s,r){Object.assign(this,{callback:e,listenerId:s,param:t,next:r});try{this.respond()}catch{this.invokeCallback(null)}}invokeCallback(e){let t=e!==null;typeof this.next=="function"?this.callback(this.next,e,t):this.callback(e,t)}};var F=class extends U{respond(){this.throwIfParamInvalid(),this.invokeCallback(new K(this.param,this.listenerId))}throwIfParamInvalid(){if(this.param!==void 0&&(!Array.isArray(this.param)||!this.param.every(Number.isInteger)))throw new Error("Invalid Parameter")}};var ce=class{eventQueue=new Map;queueNumber=0;add(e){return this.eventQueue.set(this.queueNumber,e),this.queueNumber++}remove(e){return this.eventQueue.delete(e)}exec(){this.eventQueue.forEach((e,t)=>{new F(e.callback,e.param,t,e.next)})}clear(){this.queueNumber=0,this.eventQueue.clear()}get size(){return this.eventQueue.size}};var c=class{static reset(){delete this.cmpId,delete this.cmpVersion,delete this.eventStatus,delete this.gdprApplies,delete this.tcModel,delete this.tcString,delete this.tcfPolicyVersion,this.cmpStatus=D.LOADING,this.disabled=!1,this.displayStatus=M.HIDDEN,this.eventQueue.clear()}};i(c,"apiVersion","2"),i(c,"tcfPolicyVersion"),i(c,"eventQueue",new ce),i(c,"cmpStatus",D.LOADING),i(c,"disabled",!1),i(c,"displayStatus",M.HIDDEN),i(c,"cmpId"),i(c,"cmpVersion"),i(c,"eventStatus"),i(c,"gdprApplies"),i(c,"tcModel"),i(c,"tcString");var $=class{cmpId=c.cmpId;cmpVersion=c.cmpVersion;gdprApplies=c.gdprApplies;tcfPolicyVersion=c.tcfPolicyVersion};var le=class extends ${cmpStatus=D.ERROR};var K=class extends ${tcString;listenerId;eventStatus;cmpStatus;isServiceSpecific;useNonStandardStacks;publisherCC;purposeOneTreatment;outOfBand;purpose;vendor;specialFeatureOptins;publisher;constructor(e,t){if(super(),this.eventStatus=c.eventStatus,this.cmpStatus=c.cmpStatus,this.listenerId=t,c.gdprApplies){let s=c.tcModel;this.tcString=c.tcString,this.isServiceSpecific=s.isServiceSpecific,this.useNonStandardStacks=s.useNonStandardStacks,this.purposeOneTreatment=s.purposeOneTreatment,this.publisherCC=s.publisherCountryCode,this.outOfBand={allowedVendors:this.createVectorField(s.vendorsAllowed,e),disclosedVendors:this.createVectorField(s.vendorsDisclosed,e)},this.purpose={consents:this.createVectorField(s.purposeConsents),legitimateInterests:this.createVectorField(s.purposeLegitimateInterests)},this.vendor={consents:this.createVectorField(s.vendorConsents,e),legitimateInterests:this.createVectorField(s.vendorLegitimateInterests,e)},this.specialFeatureOptins=this.createVectorField(s.specialFeatureOptins),this.publisher={consents:this.createVectorField(s.publisherConsents),legitimateInterests:this.createVectorField(s.publisherLegitimateInterests),customPurpose:{consents:this.createVectorField(s.publisherCustomConsents),legitimateInterests:this.createVectorField(s.publisherCustomLegitimateInterests)},restrictions:this.createRestrictions(s.publisherRestrictions)}}}createRestrictions(e){let t={};if(e.numRestrictions>0){let s=e.getMaxVendorId();for(let r=1;r<=s;r++){let a=r.toString();e.getRestrictions(r).forEach(u=>{let l=u.purposeId.toString();t[l]||(t[l]={}),t[l][a]=u.restrictionType})}}return t}createVectorField(e,t){return t?t.reduce((s,r)=>(s[String(r)]=e.has(Number(r)),s),{}):[...e].reduce((s,r)=>(s[r[0].toString(10)]=r[1],s),{})}};var ue=class extends K{constructor(e){super(e),delete this.outOfBand}createVectorField(e){return[...e].reduce((t,s)=>(t+=s[1]?"1":"0",t),"")}createRestrictions(e){let t={};if(e.numRestrictions>0){let s=e.getMaxVendorId();e.getRestrictions().forEach(r=>{t[r.purposeId.toString()]="_".repeat(s)});for(let r=0;r<s;r++){let a=r+1;e.getRestrictions(a).forEach(u=>{let l=u.restrictionType.toString(),h=u.purposeId.toString(),m=t[h].substr(0,r),f=t[h].substr(r+1);t[h]=m+l+f})}}return t}};var de=class extends ${cmpLoaded=!0;cmpStatus=c.cmpStatus;displayStatus=c.displayStatus;apiVersion=String(c.apiVersion);gvlVersion;constructor(){super(),c.tcModel&&c.tcModel.vendorListVersion&&(this.gvlVersion=+c.tcModel.vendorListVersion)}};var he=class extends U{respond(){this.invokeCallback(new de)}};var fe=class extends F{respond(){this.throwIfParamInvalid(),this.invokeCallback(new ue(this.param))}};var me=class extends U{respond(){let e=c.tcModel,t=e.vendorListVersion,s;this.param===void 0&&(this.param=t),this.param===t&&e.gvl?s=e.gvl:s=new S(this.param),s.readyPromise.then(()=>{this.invokeCallback(s.getJson())})}};var ge=class extends F{respond(){this.listenerId=c.eventQueue.add({callback:this.callback,param:this.param,next:this.next}),super.respond()}};var Ee=class extends U{respond(){this.invokeCallback(c.eventQueue.remove(this.param))}};var We,Je,je,ze,qe,Ye,T=class{};We=b.PING,Je=b.GET_TC_DATA,je=b.GET_IN_APP_TC_DATA,ze=b.GET_VENDOR_LIST,qe=b.ADD_EVENT_LISTENER,Ye=b.REMOVE_EVENT_LISTENER,i(T,We,he),i(T,Je,F),i(T,je,fe),i(T,ze,me),i(T,qe,ge),i(T,Ye,Ee);var re=class{static has(e){return typeof e=="string"&&(e=Number(e)),this.set_.has(e)}};i(re,"set_",new Set([0,2,void 0,null]));var Ie="__tcfapi",Ce=class{callQueue;customCommands;constructor(e){if(e){let t=b.ADD_EVENT_LISTENER;if(e?.[t])throw new Error(`Built-In Custom Commmand for ${t} not allowed: Use ${b.GET_TC_DATA} instead`);if(t=b.REMOVE_EVENT_LISTENER,e?.[t])throw new Error(`Built-In Custom Commmand for ${t} not allowed`);e?.[b.GET_TC_DATA]&&(e[b.ADD_EVENT_LISTENER]=e[b.GET_TC_DATA],e[b.REMOVE_EVENT_LISTENER]=e[b.GET_TC_DATA]),this.customCommands=e}try{this.callQueue=window[Ie]()||[]}catch{this.callQueue=[]}finally{window[Ie]=this.apiCall.bind(this),this.purgeQueuedCalls()}}apiCall(e,t,s,...r){if(typeof e!="string")s(null,!1);else if(!re.has(t))s(null,!1);else{if(typeof s!="function")throw new Error("invalid callback function");c.disabled?s(new le,!1):!this.isCustomCommand(e)&&!this.isBuiltInCommand(e)?s(null,!1):this.isCustomCommand(e)&&!this.isBuiltInCommand(e)?this.customCommands[e](s,...r):e===b.PING?this.isCustomCommand(e)?new T[e](this.customCommands[e],r[0],null,s):new T[e](s,r[0]):c.tcModel===void 0?this.callQueue.push([e,t,s,...r]):this.isCustomCommand(e)&&this.isBuiltInCommand(e)?new T[e](this.customCommands[e],r[0],null,s):new T[e](s,r[0])}}purgeQueuedCalls(){let e=this.callQueue;this.callQueue=[],e.forEach(t=>{window[Ie](...t)})}isCustomCommand(e){return this.customCommands&&typeof this.customCommands[e]=="function"}isBuiltInCommand(e){return T[e]!==void 0}};var Se=class{callResponder;isServiceSpecific;numUpdates=0;constructor(e,t,s=!1,r){this.throwIfInvalidInt(e,"cmpId",2),this.throwIfInvalidInt(t,"cmpVersion",0),c.cmpId=e,c.cmpVersion=t,c.tcfPolicyVersion=2,this.isServiceSpecific=!!s,this.callResponder=new Ce(r)}throwIfInvalidInt(e,t,s){if(!(typeof e=="number"&&Number.isInteger(e)&&e>=s))throw new Error(`Invalid ${t}: ${e}`)}update(e,t=!1){if(c.disabled)throw new Error("CmpApi Disabled");c.cmpStatus=D.LOADED,t?(c.displayStatus=M.VISIBLE,c.eventStatus=B.CMP_UI_SHOWN):c.tcModel===void 0?(c.displayStatus=M.DISABLED,c.eventStatus=B.TC_LOADED):(c.displayStatus=M.HIDDEN,c.eventStatus=B.USER_ACTION_COMPLETE),c.gdprApplies=e!==null,c.gdprApplies?(e===""?(c.tcModel=new H,c.tcModel.cmpId=c.cmpId,c.tcModel.cmpVersion=c.cmpVersion):c.tcModel=Y.decode(e),c.tcModel.isServiceSpecific=this.isServiceSpecific,c.tcfPolicyVersion=Number(c.tcModel.policyVersion),c.tcString=e):c.tcModel=null,this.numUpdates===0?this.callResponder.purgeQueuedCalls():c.eventQueue.exec(),this.numUpdates++}disable(){c.disabled=!0,c.cmpStatus=D.ERROR}};var xe=class{constructor(){}receiveMessage(e){let t=typeof e.data=="string",s={};try{t?s=JSON.parse(e.data):s=e.data}catch(r){}if(s&&s.__tcfapiCall){let r=s.__tcfapiCall.callId,a=s.__tcfapiCall.command,u=s.__tcfapiCall.parameter,l=s.__tcfapiCall.version,h=function(m,f){let I={__tcfapiReturn:{returnValue:m,success:f,callId:r,command:a}};e&&e.source&&e.source.postMessage&&e.source.postMessage(t?JSON.stringify(I):I,"*")};window.__tcfapi.apply(window,[a,l,h,u])}else s&&s.hasOwnProperty("OnetrustIABCookies")&&(s.OnetrustIABCookies==="blocked"&&(s.OnetrustIABCookies=null),window.OneTrust.updateConsentFromCookies(s.OnetrustIABCookies))}initializeTCF(){window.removeEventListener("message",window.receiveOTMessage),delete window.receiveOTMessage,(window.attachEvent||window.addEventListener)("message",t=>J.receiveMessage(t),!1)}getGVLObject(e,t){if(e){let s=e.substr(e.lastIndexOf("/")+1);S.baseUrl=e.replace("/"+s,""),S.latestFilename=s}return new S(t)}getTCModelObject(e){return new H(e)}getTCStringObject(){return Y}getCmpApi(e,t,s,r={}){return new Se(e,t,s,r)}getPurposeRestriction(e,t){return new _(e,t)}},J=new xe;J.initializeTCF();window.otIabModule={tcfSdkRef:{gvl:J.getGVLObject,tcModel:J.getTCModelObject,tcString:J.getTCStringObject,cmpApi:J.getCmpApi,purposeRestriction:J.getPurposeRestriction}};})();
